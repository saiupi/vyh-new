<div class="card_pad">
  <div class="closeBtn">
    <ion-buttons>
      <ion-button color="black" (click)="closeModal()">
        <i class="fal fa-times-circle fa-lg"></i>
      </ion-button>
    </ion-buttons>
  </div>
  <div class="mb-3">
    <ion-text class="login_form_text mb-3 font-weight-bold">Log In</ion-text>
    <ion-text class="login_form_text1 float-right ml-1 font-weight-bold" (click)="openRegister()">Sign Up</ion-text>
    <ion-text class="float-right">New To Voyaah?</ion-text>
  </div>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <label for="username" class="pStyle m-0">Email or Mobile Number</label>
    <div class="d-flex no-gutters">
      <div *ngIf="!containsAlphabet && form.controls.username.value.length>3" class="country-code">
        <select class="form-control d-inline" id="sel1" formControlName="countryCode">
          <option value="+91">+91</option>
          <option value="+1">+1</option>
        </select>
      </div>
      <div class="flex-grow-1">
        <input autocomplete="off" type="email" (keyup)="onKey($event)" (input)="trackType($event)"
          formControlName="username" class="form-control" [ngClass]="{
          'is-invalid': (submitted || forgotPasswordClicked) && f.username.errors
        }" placeholder="Email or Mobile Number" maxlength="50" />
        <!-- <div *ngIf="(submitted || forgotPasswordClicked) && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">
            Email or Mobile Number is required
          </div>
          <div *ngIf="f.username.errors.pattern">
            Email should be valid (or) mobile number required country
            code(+91 - 1234 567 890)
          </div>
        </div> -->
      </div>


    </div>


    <label for="password" class="pStyle m-0 mt-3">Password</label>
    <input type="password" [type]="passwordType" (keyup)="onKey($event)" formControlName="password"
      class="form-control borderlineLogin" [ngClass]="{ 'is-invalid': submitted && f.password.errors }"
      placeholder="Password" maxlength="50" />
    <ion-icon [name]="passwordIcon" class="passwordIcon" (click)="hideShowPassword()"></ion-icon>
    <!-- <div *ngIf="submitted && f.password.errors" class="mt-1 invalid-feedback">
      <div *ngIf="f.password.errors.required">Password is required</div>
      <div *ngIf="f.password.errors.pattern">
        Password must be strong(use caps,special char or numbers)
      </div>
    </div> -->

    <ion-label *ngIf="invalidUser" class="mt-1 invalidUser">{{loginError}}</ion-label>

    <div class="mt-2 text-right">
      <ion-text class="text-dark d-inlineblock mt-1 mr-2 cursor-pointer" (click)="presentForgotPassword()">Forgot
        Password?
      </ion-text>
      <button class="text-white save-button-styles mt-2" data-amplify-analytics-on='click'
      data-amplify-analytics-name='LoggedIn'
      data-amplify-analytics-attrs='login' >
        <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
        Sign In
      </button>
    </div>
  </form>

  <div class="or_div text-center mt-3 mb-3" style="display: none">
    <ion-text class="or">Or</ion-text>
  </div>

  <ion-row class="loginIcons">
    <ion-col class="pr-1">
      <button class="fb_btn btn btn-block" (click)="onClickFacebook()" data-amplify-analytics-on='click'
      data-amplify-analytics-name='FacebookLogIn'
      data-amplify-analytics-attrs='facebooklogin' >
        Login with Facebook
      </button>
    </ion-col>

    <ion-col class="pl-1">
      <button class="google_btn btn btn-block" (click)="onClickGoogle()" data-amplify-analytics-on='click'
      data-amplify-analytics-name='GoogleLogIn'
      data-amplify-analytics-attrs='googlelogin' >
        Login with Google
      </button>
    </ion-col>
  </ion-row>
</div>
